sudo: required
language: python:2.7
env:
  global:
  - IMAGE=hello-python-travis
  - REPO=hello-python-travis
  - TAG=latest
  - secure: oZNvlwT7Vm8pRASmDgqZITQlY/zV/ct3QN64I4AuqWUQr6GXJUSZnKhhvwINGCu8nTLkPMYB5TIo9haCOEIVkHdAu0CQLZ8b2q6wVWMjzq+zzICosrLuFb0/VuAyz/UNnNwEXRDGGlEFxB1qEilQ2tMhgXagl/TcV0NfvGxGRWpnKsy17/ccKzfGCjdmsU8+ZoSUhsdkLqbWx/NB/i3Kf3K5k4JihKNTfoy+Ca0NYJFVK+aBNtY4gdYRUhonwtyhNCAIDN65kwG2BUzvqWaVNozDpLNBFrV/95homkLOGsCjK319AJJkWezo5H/zcSoo9w9FA3algOjrybZZgv2UqjUjPrUv3IBBy5Axv0oZEEf9mzQE6cLBmNXaT11tFLQdowfAp1rTq9nr2R3vyF6kRehXYOSi2p3Tm6rqJqrCzHhrDIWtTsD9cxytcqnDrjRCcL+Qq76YJLH8GC13EKRO951Q0NJ1pOZEl1L+mw2HJBJDwVtGho9ToyB67INHzuvLXHAdKInvEeFga4RIzJqNrgCAuUGznHtruLp8ojLek7zxg+99JjPKlwgw9BFWvTf4qGyNKg6dYyocohLOCANY67Ln0hQxK2Cwr0mtJJRMkZmijYoWNOuD/9Qfln61FrxyUr7bmzfiaH4qj0ovG/cqQH167w7V0WvWoLCg83NDW3M=
  - secure: a+dgV1K8lkwAhgxLWYrOgxNuAjrhMA1sRcnyy2QLpGSnBcFmuZklSSmRVW5Mt0JDzCf5pSxW8kLopWKHxCI0nybSpYJIDDnl/93CExffZlFiU0Jgyc0n5ELdmAzcxABsXBEZBW25HZlNyG3otWqp5uEJzal1KKPmDKV4LTt1uUfrS4I2veWV1X7eU5Xd+Tgx5NYqIKX1tt55/oUOwRTENyLrQUu+pKxV0R7nlCdfmcYQ5p95ve93rLP8JOaT+0ZxBnHO4DT7GDHLBLX+NhGapCe1JAIz6HPJzWoHKo3R50xelE7QCIir/0Si7kXa4gq2CTIDzEGKhkhma8X65e2kWkbcrAw9W86saWRY5mjE984nqIOMWbwVx4/HQe7OLAGsND6m87htHG3iyeLP4Um/MA32KpiUTD94w3Z3wLlzmecWhEcntig2obsJgrsqt+OVpGgcwXD5UrqniHps6+WRJvV3c63idZRoo2mJNsBrFgp8lGRmeW1ZDeJ2zdt++cedQC2Ye/BX7LgsfVBmqp6xi0pRW2XFsDrelluSVMltWjZd49RTzF2cbfSySHMuraude5Oo0quthPA1oVLFLD+kr0SkiM+u36Vv1OZ/765AZPm6yuLNrxLGzeCcbuFhTLnznOCpNPyWNT9/qiEW7humSCaMWHNWw87FHWBcXqIWhI4=
  - secure: peHTZGEONml/c4qdPuTQB1q4Jk9bsgjjl0nmmvgbYw+THPBCs24eBjp+y/Ve1CbW0dtruTBcJKFa2mQeApogHRgqWQqjHNILhCWwS5u59HUZOP7pkONejJqX0BhHfrN28Xk7X7L7a6iKv9S/+KsiuwB6W6YPWBqekTrs2kQdCzArRbB7jc4TSPo1inia4bB6a16HsHs/URe+ode9m4+sc4DCJQgYaqH8ZWJtVBC5GRTyI9m+BqCD2B0liZ/S/HGRcgaBPP2Gg65r/Ry3yf00In4BK3ElPiN7XVdbXqSAa1yjzAb/0/lXmQoI08faBhOLMUeKVjtDdBfvQm+xT6r9ZlV0OPLwqKJzrZPmfrhSNtSmVV7uCgLrXPm7lulmaEr8SHzIDEbklxWwz4IOj2WA7U/b+cQxwRuHOpRtAz8tS0TkbrE/qSglzPRYtxW7+el6Ivr6ZhDWe32hDangpnOPB5PK0w2djPP/vlHaWJumb4H1SeeRjIxib0fDQgJd9j6s490rZilD6oecdOJYZRuqecC7ShiCY7OXeIHB+UDdgDVHkWJqRi3ZDXdwz4079p2DVfvG0Z3eVGB6SdQtmOYgrOie7geiM1PsGJAumXxPxV2rcWc6rlvQFrlAPLvY487+A7oXrLMZU49jd2/hVKSyNrdEllDJPCzy2W3Ndf/SzdQ=
services:
- docker
before_install:
- docker build -t $IMAGE:$TAG .
- docker run $IMAGE:$TAG
script:
- docker login tenableio-docker-consec-local.jfrog.io -u pubread -p $TENABLE_JFROG_PASSWORD
- docker pull tenableio-docker-consec-local.jfrog.io/cs-scanner:latest
- docker save $IMAGE:$TAG | docker run -e DEBUG_MODE=true -e TENABLE_ACCESS_KEY=$TENABLE_IO_ACCESS_KEY
  -e TENABLE_SECRET_KEY=$TENABLE_IO_SECRET_KEY -e IMPORT_REPO_NAME=$REPO -i tenableio-docker-consec-local.jfrog.io/cs-scanner:latest
  inspect-image $IMAGE:$TAG
- cat ./tiocs-check.sh | sh -s
